%div{"data-controller" => "expenses"}
  %table.table.table-sm.table-striped
    %thead
      %tr
        %th Date
        %th Description
        %th Value
        - if show.include? :statement
          %th Statement date
        - if show.include? :source
          %th Source
        - if show.include? :category
          %th Category
        - if show.include? :subcategory
          %th Sub-category
        %th
    %tbody
      - expenses.each do |expense|
        %tr
          %td= expense.date.strftime("%Y-%m-%d")
          %td
            = expense.description
            - if expense.comment && expense.comment != ""
              %a{"data-bs-toggle" => "tooltip", "data-bs-title" => "#{expense.comment}"}
                %svg.bi.pe-none.me-2{ :width => "16", :height => "16", "aria-hidden" => "true" }
                  %use{ "xlink:href" => "#info" }
          %td{ :class => "#{p 'text-decoration-line-through fw-lighter' if expense.ignore}" }
            = format("%.2f", expense.value)
          
          - if show.include? :statement
            %td= "#{expense.statement.year}-#{"%02d" % expense.statement.month}"
          
          - if show.include? :source
            %td
              %a{"data-bs-toggle" => "tooltip", "data-bs-title" => "#{expense.statement.source.name}"}
                %svg.bi.pe-none.me-2{ :width => "16", :height => "16", "aria-hidden" => "true" }
                  %use{ "xlink:href" => "#info" }

          - if show.include? :category
            %td= expense.category.name

          - if show.include? :subcategory
            %td= expense.subcategory.name
          
          %td
            %button.btn.btn-sm{ :type => "button", "data-bs-toggle" => "modal", "data-bs-target" => "#editExpenseModal", "data-action" => "expenses#render_form", "data-expenses-id-param" => "#{expense.id}" }
              %a{"data-bs-toggle" => "tooltip", "data-bs-title" => "Edit"}
                %svg.bi.pe-none.me-2{ :width => "16", :height => "16", "aria-hidden" => "true" }
                  %use{ "xlink:href" => "#edit" }

  .modal.fade#editExpenseModal{ :tabindex => "-1", "aria-labelledby" => "editExpenseModalLabel", "aria-hidden" => "true"}
    .modal-dialog
      .modal-content
        .modal-header
          Edit expense
          %button.btn-close{ :type => "button", "data-bs-dismiss" => "modal", "aria-label" => "Close" }
        .modal-body#formPlaceholder{"data-expenses-target" => "placeholder"}
          
        .modal-footer
          %button.btn.btn-danger{ :type => "button", "data-action" => "expenses#delete_expense"} 
            Delete expense
          %button.btn.btn-fakturo-action{ :type => "button", "data-action" => "expenses#send_form"} 
            Save changes
